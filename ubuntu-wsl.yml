---
- name: Configure WSL (Ubuntu 22.04)
  hosts: localhost
  connection: local

  vars:
    local_user: vidi
    local_group: vidi

    tmp_path: /tmp/dotfiles
    go_version: "go1.20"
    awscli_version: "2.9.21"

  pre_tasks:
    - name: Create tmp path for working
      ansible.builtin.file:
        path: "{{ tmp_path }}/"
        state: directory
        mode: u=rwx,g=rx,o=rx

  roles:
    - name: Install & upgrade packages.
      role: install_packages
      vars:
        apt_packages:
          - curl
          - jq
          - python3-full
          - python3-pip
        pip_packages:
          - ansible
          - ansible-lint
          - virtualenv

    - name: Install & configure git
      role: git

    - name: Install AWS CLI
      role: awscli
      vars:
        version: "{{ awscli_version }}"

    - name: Install Go
      role: go
      vars:
        version: "{{ go_version }}"
